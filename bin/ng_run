#!/usr/bin/env python3.6
# ng_run.py
"""Script for running the package.
"""
######################
# Imports & Globals
######################

import sys, os, argparse

from ng_trajectory import configurationLoad, execute

# Global variables
PARSER = argparse.ArgumentParser(
    prog = "ng_run",
    formatter_class=argparse.RawDescriptionHelpFormatter,
    description = """
Script for running the optimization using ng_trajectory.

One argument is expected with a path to '.json' configuration.
    """,

)

# Arguments
PARSER.add_argument("input_file",
    help = "Path to the '.json' configuration file.",
    default = None,
    type = str,
)


######################
# Main
######################

if __name__ == "__main__":
    # Obtain arguments
    args, rest = PARSER.parse_known_args()

    # Expect one argument
    if len(sys.argv) > 1:
        if os.path.exists(sys.argv[1]):
            if configurationLoad(sys.argv[1]):
                print (execute())
            else:
                print ("Unable to load configuration from given file.", file=sys.stderr)
        else:
            print ("File %s does not exist." % sys.argv[1], file=sys.stderr)
    else:
        print ("Expected one argument with path to the configuration file.", file=sys.stderr)

